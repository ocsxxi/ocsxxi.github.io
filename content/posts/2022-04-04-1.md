---
title: 微信小程序设置动画API后图片闪动并且延迟高的解决方法
date: "2022-04-04T01:11:00.000Z"
description: ""
author: ocsxxi
location: 西安，中国
tags:
  - 微信小程序
  - 微信小程序动画
---

# 问题背景

如下方代码所示，该段代码在微信开发者工具内动画正常且流畅，但运行在`ios`设备中运行时发生动画卡顿，难以触发动画，且时常发生卡顿。

```jsx
<view animation={{animation}}>
  <img src="..." mode="widthFix" style="width: 100%"/>
</view>
```

# 尝试解决的思路

1. 把相同动画应用到文本按键上，在ios设备中运行时，按键动画展示丝滑且无闪烁，考虑是内容的问题。

2. 尝试将`image`组件更换为`cover-image`组件。我所设置的`view`外层有一个圆角，并且有一个缩放动画，在更改完组件后，圆角消失，动画变为了偏移而非缩放，也就是说小程序的`animation`变形并未作用到`cover`组件上，放弃这条路。

（在微信官方文档中无论是在`cover`系列组件的章节，还是`animation`的章节，均未提到其是剥离文档流而存在这件事，算是个坑，也可呢是官方没想到会有人这么玩吧）

3. 尝试使用`background-image`样式来替换`image`组件，成功。

# 最终解决方案

把`image`图片设置未外层`view`的`background-image`就能完美解决了，亲测有效，在`ios`设备上展示丝滑，且不会发生图片闪烁。